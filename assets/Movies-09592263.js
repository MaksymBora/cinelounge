import{j as e,r as c,F as g,A as f,_ as M,I as B}from"./index-4edb6553.js";import{M as P}from"./MovieCard-09a7ae1f.js";import{g as $,T as A,P as R}from"./MuiPallete-50fcd646.js";import{S as _,d as D,g as S,i as I,m as E,c as G,I as O,C as v,a as k,w as V,F as z}from"./watchProviders-4536cb2f.js";import{H}from"./index.esm-c3fd1986.js";import{i as L}from"./imagePath-b3d8f83e.js";import{c as W}from"./TransitionGroupContext-7cfe6ae1.js";import"./index.esm-7aca774a.js";import"./utilities-1b6bfb65.js";import"./plug-56201456.js";import"./Transition-5cad3421.js";import"./index-01c4eb7b.js";const q=({moviesData:s,filterMenuOpen:a})=>e.jsx("section",{className:` grid grid-cols-filmList gap-8 bg-inherit text-mainTextColo  ${a?"widthWithFilter":"w-full"}`,children:s==null?void 0:s.results.map(r=>r.poster_path&&e.jsx(P,{movieData:r},r.id))}),F=[{value:"popularity.desc",label:"Popularity"},{value:"vote_average.desc",label:"Rating"},{value:"primary_release_date.desc",label:"Newly released"},{value:"revenue.desc",label:"Revenue"},{value:"vote_count.desc",label:"Review count"}],J={year:[1e3,9999],runtime:[0,999],rating:[0,100],genres:[],services:[]},K=({selectedOption:s,setSelectedOption:a})=>{const{setMoviesData:r}=c.useContext(g),n=i=>{a(i)};return c.useEffect(()=>{s&&(async(d,m)=>{try{const l=await S(d,m);l&&r(l.data)}catch(l){console.log(l)}})(s.value,J)},[s,r]),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-center text-black dark:text-mainTextColo mb-2 font-semibold text-[18px]",children:"Sort by"}),e.jsx(_,{options:F,className:"text-black",styles:D,onChange:i=>n(i),defaultValue:F,value:s,isSearchable:!1})]})},Q=I(),U=({formData:s,setFormData:a})=>{const r=n=>{a({...s,genres:n})};return e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-center text-black dark:text-mainTextColo mb-2 font-semibold text-[18px]",children:"Genre"}),e.jsx(_,{options:E,className:"text-black",styles:D,value:s.genres,isSearchable:!1,isMulti:!0,onChange:r,components:Q})]})},X=G(O.Range),Y=({formData:s,setFormData:a,name:r,min:n,max:i,step:d,state:m,marks:l,tipFormatter:o})=>{const u=t=>{a({...s,[r]:t})};return e.jsxs("div",{className:"mb-12 py-0 px-[14px]",children:[e.jsx("header",{className:"flex mb-[2.4 rem] justify-center items-center",children:e.jsx("h3",{className:"capitalize text-black dark:text-mainTextColo mb-2 font-semibold text-[18px]",children:r})}),e.jsx(X,{className:"text-[20px] mr-[5px]",onChange:u,defaultValue:[n,i],value:m,min:n,max:i,step:d,marks:l,tipFormatter:o,railStyle:v.rail,trackStyle:v.track,dotStyle:v.dot,handleStyle:v.handle,tipProps:{placement:"top",visible:!0}})]})},Z=({setFormData:s,id:a,name:r,state:n,stateStr:i,img:d})=>{const m=()=>{s(l=>{const o=n.includes(a)?n.filter(u=>u!==a):[...n,a];return{...l,[i]:o}})};return e.jsx("li",{className:"flex items-center",children:e.jsx("button",{type:"button",onClick:m,className:`bg-transparent cursor-pointer duration-500 border-[1px] border-[black] m-[2px] rounded-[2px] opacity-100 ${n.length>0&&!n.includes(a)?"opacity-20":""}`,"aria-pressed":n.includes(a),"aria-label":r,children:e.jsx("img",{src:`${L}original${d}`,loading:"lazy",alt:"",className:"flex rounded-[1px]"})})})},ee={year:[1e3,9999],runtime:[0,999],rating:[0,100],genres:[],services:[]},te=()=>{const{MoviesformData:s,setMoviesFormData:a}=c.useContext(g),[r,n]=c.useState(null),{setMoviesData:i}=c.useContext(g),{setPage:d}=c.useContext(f),{setShouldFetchData:m}=c.useContext(f),l=[{name:"year",min:1980,max:2023,step:1,tipFormatter:t=>t,state:s.year,marks:k.year},{name:"rating",min:0,max:100,step:1,tipFormatter:t=>`${t}%`,state:s.rating,marks:k.rating},{name:"runtime",min:0,max:240,step:5,tipFormatter:t=>`${t}%`,state:s.runtime,marks:k.runtime}],o=t=>{t.preventDefault(),(async(y,j)=>{try{const x=await S(y,j);i(x==null?void 0:x.data)}catch(x){console.log(x)}})("popularity.desc",s)},u=t=>{t.preventDefault(),a(ee),i(null),n(null),d(1),m(!0),window.scrollTo(0,0)};return e.jsx("div",{className:"scroll  w-[230px] px-px sticky h-[80vh] active:translate-x-0 active: opacity-100",children:e.jsxs("form",{className:"form",onSubmit:o,children:[e.jsx(K,{selectedOption:r,setSelectedOption:n}),e.jsx("div",{className:"bg-[#ddd] h-px rounded-[10px] mb-4"}),e.jsx(U,{formData:s,setFormData:a}),e.jsx("div",{className:"bg-[#ddd] h-px rounded-[10px] mb-4"}),l.map(t=>e.jsx(Y,{formData:s,setFormData:a,name:t.name,min:t.min,max:t.max,step:t.step,state:t.state,marks:t.marks,tipFormatter:t.tipFormatter},t.name)),e.jsx("div",{className:"bg-[#ddd] h-px rounded-[10px] mb-4"}),e.jsxs("div",{className:"flex flex-col items-center w-full mb-8",children:[e.jsx("h3",{className:"w-full mb-6 text-center text-black dark:text-mainTextColo font-semibold text-[18px]",children:"Services"}),e.jsx("ul",{className:"w-full grid gap-[5px] grid-cols-4",children:V.map(t=>e.jsx(Z,{setFormData:a,state:s.services,stateStr:"services",id:t.provider_id,name:t.provider_name,img:t.logo_path},`${t.provider_id}-${t.provider_name}`))})]}),e.jsx("div",{className:"bg-[#ddd] h-px rounded-[10px] mb-4"}),e.jsxs("div",{className:"flex flex-col gap-y-5 mt-8 mr-0 mb-8 ml-[2px]",children:[e.jsx("button",{className:"text-[17px] font-medium p-[15px] rounded-[3px] border-none text-left cursor-pointer shadow-filterBtn bg-authBtn text-black dark:text-mainTextColo",type:"submit","aria-label":"Apply filters",children:e.jsxs("span",{className:"flex justify-between items-center",children:["Apply ",e.jsx(H,{className:"scale-160 mr-[5px]"})]})}),e.jsx("button",{className:"text-[17px] font-medium p-[15px] rounded-[3px] border-none text-left cursor-pointer shadow-filterBtn bg-clearAllBtn text-black",type:"button",onClick:u,"aria-label":"Clear all filters",children:"Clear All"})]})]})})},pe=({signedIn:s,setSignedIn:a})=>{const[r,n]=c.useState(!1),{shouldFetchData:i,setShouldFetchData:d}=c.useContext(f),{page:m,setPage:l}=c.useContext(f),{moviesData:o,setMoviesData:u}=c.useContext(g),{MoviesformData:t}=c.useContext(g),{darkMode:w}=c.useContext(f),y=W($(w?"dark":"light"));c.useEffect(()=>{i&&(o===null||m!==1||m===1)&&(async(p,C,h)=>{try{const b=await S(p,C,h);b&&(u(b.data),d(!1))}catch(b){console.log(b)}})("popularity.desc",t,m),s&&M.custom(p=>(a(!1),e.jsxs("div",{className:`${p.visible?"animate-enter":"animate-leave"} max-w-md w-full bg-white shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5`,children:[e.jsx("div",{className:"flex-1 w-0 p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:e.jsx("img",{className:"h-10 w-10 rounded-full",src:"https://avatars.githubusercontent.com/u/123206568?v=4",alt:""})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Maksym (Main Developer)"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"I hope you enjoy your time! ðŸ˜‰"})]})]})}),e.jsx("div",{className:"flex border-l border-gray-200",children:e.jsx("button",{type:"button",onClick:()=>M.dismiss(p.id),className:"w-full border border-transparent rounded-none rounded-r-lg p-4 flex items-center justify-center text-sm font-medium text-indigo-600 hover:text-indigo-500 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:"Close"})})]})),{duration:5e3})},[o,u,m,i,d,t,s,a]);const j=x=>{const N=parseInt(x.target.textContent,10),p=x.target.dataset.testid,C=N||p;switch(d(!0),typeof C){case"number":l(N);break;case"string":p==="NavigateNextIcon"?l(h=>h+1):p==="NavigateBeforeIcon"&&m>1?l(h=>h-1):l(1);break;default:l(1)}};return e.jsxs(e.Fragment,{children:[e.jsx(z,{filterMenuOpen:r,setFilterMenuOpen:n}),e.jsxs("div",{className:"max-w-xxl mx-auto flex my-12 justify-center items-start gap-x-8",children:[r&&e.jsx(te,{}),e.jsx(q,{moviesData:o,filterMenuOpen:r})]}),e.jsxs(A,{theme:y,children:[e.jsx("section",{className:"max-w-xxl mx-auto flex items-center justify-center my-12",children:(o==null?void 0:o.total_pages)&&e.jsx(R,{count:(o==null?void 0:o.total_pages)>25?25:o==null?void 0:o.total_pages,variant:"outlined",shape:"rounded",sx:{button:{padding:"15px"}},siblingCount:1,onChange:j})}),e.jsx(B,{position:"bottom-left",reverseOrder:!0})]})]})};export{pe as default};
