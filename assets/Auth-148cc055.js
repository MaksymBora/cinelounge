import{r as s,A as n,j as t,y as w,z as C}from"./index-e558ba13.js";const N=({setSignedIn:x})=>{const[a,d]=s.useState(!0),[l,m]=s.useState(""),[i,u]=s.useState(!1),{setUserName:h}=s.useContext(n),{setIsLoggedIn:p}=s.useContext(n),{setSubscription:g}=s.useContext(n),{setAvatar:b}=s.useContext(n),f=r=>{r.preventDefault();const o=r.currentTarget,c={...o.elements.name&&o.elements.name.value&&{name:o.elements.name.value},email:o.elements.email.value,password:o.elements.password.value};a?(async()=>{try{const e=await w(c),y=400;if(e&&e.status&&e.status>=y){m(e.data.message);return}p(!0),x(!0),h(e==null?void 0:e.data.user.name),g(e==null?void 0:e.data.user.subscription),b(e==null?void 0:e.data.user.avatar)}catch(e){console.log(e,"Error")}})():(async()=>{try{const e=await C(c);if(e===void 0){console.log("User with current email already exists");return}m(e.data.message),u(!0)}catch(e){console.log(e)}})(),o.reset()};return t.jsxs("div",{className:"max-w-xxl my-0 mx-auto h-auth flex flex-col justify-center items-center",children:[t.jsx("h1",{className:"mb-8 text-4xl font-semibold text-black dark:text-mainTextColo",children:a?"Login":"Register"}),t.jsxs("form",{onSubmit:f,className:"flex flex-col justify-center",children:[!a&&t.jsxs(t.Fragment,{children:[t.jsx("label",{htmlFor:"name",className:"text-sm text-black dark:text-mainTextColo",children:"Name"}),t.jsx("input",{id:"name",className:"h-full p-3 my-2 mx-0 w-[300px] mb-8 text-black dark:text-mainTextColo bg-white  dark:bg-gray-600 border outline-authBtn rounded",type:"name",placeholder:"Name",name:"name",autoComplete:"off"})]}),t.jsx("label",{htmlFor:"email",className:"text-sm text-black dark:text-mainTextColo",children:"Email Address"}),t.jsx("input",{id:"email",className:"h-full p-3 my-2 mx-0 w-[300px] mb-8 text-black dark:text-mainTextColo bg-white  dark:bg-gray-600 border outline-authBtn rounded",type:"text",placeholder:"Email",name:"email",autoComplete:"off"}),t.jsx("label",{htmlFor:"password",className:"text-sm text-black dark:text-mainTextColo",children:"Password"}),t.jsx("input",{id:"password",className:"h-full p-3 my-2 mx-0 w-[300px] mb-8 text-black dark:text-mainTextColo bg-white  dark:bg-gray-600 border outline-authBtn rounded",type:"password",placeholder:"Password",name:"password",autoComplete:"off"}),t.jsx("button",{className:`mt-12 py-[15px] px-0 text-base cursor-pointer bg-authBtn shadow-btnAuth font-bold 
		  uppercase tracking-[0.5px] active:transform scale-97 rounded text-black dark:text-mainTextColo`,type:"submit",children:a?"Login":"Register"})]}),t.jsx("a",{href:"#0",className:"text-[13px] mt-6 text-black dark:text-mainTextColo hover:underline",onClick:()=>{d(r=>!r)},children:a?"Create an account":"Login"}),i&&!a&&t.jsx("p",{className:"mt-4 text-sm text-green-400",children:l}),!i&&a&&t.jsx("p",{className:"mt-4 text-sm text-red-500",children:l})]})};export{N as default};
