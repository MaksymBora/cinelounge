import{r as c,a as L,j as e,A as B,u as S,B as G,b as H,_ as M,L as y,c as O,d as K,e as V,g as q}from"./index-78761289.js";import{a as J}from"./index.esm-7357bacc.js";import{F as Q}from"./index.esm-62a925b6.js";import{i as o}from"./imagePath-b3d8f83e.js";import{c as U,f as X,a as Y}from"./utilities-1b6bfb65.js";import{u as E,I as Z,i as v,C as D,T as ss,a as es,M as ts}from"./index.esm-4884aa7c.js";import{g as I,a as rs,d as ls}from"./serviceFavMovies-e1d9fdea.js";import"./TransitionGroupContext-536789fd.js";import"./Transition-495cc5b8.js";const ns=document.getElementById("imageGallery"),cs=({setViewGallery:s,movie:r})=>{const t=E("Escape"),l=["780","1280",""];c.useEffect(()=>{t&&s(!1)},[t,s]);const n=r==null?void 0:r.images.backdrops.map(i=>({original:`${o}w780${i.file_path}`,thumbnail:`${o}w780${i.file_path}`,originalWidth:780,originalHeight:439,sizes:"(max-width: 780px) 780px, (max-width: 1280px) 1280px",srcSet:l.map((x,p)=>`${o}${p<2?"w":"original"}${x}${i.file_path} ${p<2?x:i.width}w`).join(", "),loading:"lazy",thumbnailLoading:"lazy",originalAlt:"",thumbnailAlt:""})),u=i=>{const x=i.target;(x.classList.contains("image-gallery-swipe")||x.classList.contains("wrapper")||x.classList.contains("image-gallery-slide-wrapper"))&&s(!1)};return L.createPortal(e.jsx("div",{className:"fixed top-0 left-0 w-screen h-screen bg-imageGallery z-[2] wrapper",onClick:u,children:e.jsx(Z,{slideInterval:2400,items:n,showFullscreenButton:v.isBrowser,showIndex:!0})}),ns)},xs=document.getElementById("trailerModal"),is=({setViewTrailer:s,trailer:r,movie:t})=>{const l=E("Escape");return c.useEffect(()=>{l&&s(!1)},[l,s]),L.createPortal(e.jsx("div",{className:"fixed top-0 left-0 w-screen h-screen bg-imageGallery z-[2] opacity-100",onClick:()=>s(!1),children:e.jsx("iframe",{src:`https://www.youtube-nocookie.com/embed/${r==null?void 0:r.key}?autoplay=0`,className:`trailer fixed top-[50%] left-[50%] -translate-y-1/2 -translate-x-1/2 
		max-h-[92vh] bg-black border border-[#ccc] shadow-[0_0_10px_1-px_rgba(0,0,0,0)] w-iframeW h-iframeH`,allowFullScreen:!0,title:t==null?void 0:t.title})}),xs)},ds=({movieData:s})=>{var $,C;const[r,t]=c.useState(!1),[l,n]=c.useState(!1),[u,i]=c.useState(!1),[x,p]=c.useState(!1),{isLoggedIn:b}=c.useContext(B),{id:j}=S();if(c.useEffect(()=>{b&&!x&&(async()=>{try{(await I()).find(w=>w.movieId===Number(j))&&p(!0)}catch(a){p(!1),console.log(a)}})()},[]),!s)return null;const{vote_average:k,genres:g}=s,N=(s==null?void 0:s.images.backdrops)&&s.images.backdrops.length>0,m=(C=($=s==null?void 0:s.videos)==null?void 0:$.results)==null?void 0:C.find(d=>d.type.toLowerCase()==="trailer"&&d.site.toLowerCase()==="youtube"),P=()=>N&&t(!0),W=()=>{if(!b){n(!0);return}const{release_date:d,vote_average:a,poster_path:_,title:w}=s,z={movieId:j,date:d,rating:a,poster:_,name:w,type:"movie"},A=async h=>{try{await rs(h),p(!0),M.success(e.jsxs("div",{children:["Movie ",e.jsx("b",{children:h.name})," added in Watchlist!"]}),{duration:4e3,icon:"âœ…"})}catch(f){console.log(f)}},R=async()=>{try{const f=(await I()).find(F=>F.movieId===Number(j)),T=await ls(f==null?void 0:f._id);return p(!1),M.success(e.jsxs("div",{children:["Movie ",e.jsx("b",{children:T.message.slice(5,13)})," from Watchlist!"]}),{duration:4e3,icon:"ðŸš«"}),T}catch(h){return console.log(h),h}};x||A(z),x&&R()};return e.jsxs("section",{className:"my-12 mx-0 relative",children:[e.jsxs("div",{className:`h-[600px]  {${s!=null&&s.backdrop_path?"":"bg-movieAboutBg"}}`,children:[e.jsx("div",{style:{background:`url('${o}original${s==null?void 0:s.backdrop_path}') no-repeat top center/cover`},className:"absolute w-full h-full -z-5"}),e.jsxs("div",{className:"grid grid-cols-[1fr,4fr] items-center gap-x-16 z-[1] max-w-xxl mx-auto my-0 text-white relative h-full",children:[N?e.jsxs("button",{type:"button",className:"w-[300px] flex items-start rounded-cardBr relative text-xl border-none overflow-hidden bg-black cursor-pointer transition duration-250 ease-in group",onClick:P,children:[e.jsx("img",{src:`${o}w780${s==null?void 0:s.poster_path}`,alt:"",className:"transition-all group-hover:opacity-25"}),e.jsxs("p",{className:"opacity-0 w-full h-full absolute top-0 left-0 transition-all flex justify-center items-center text-white group-hover:opacity-100 ",children:[e.jsx("i",{children:e.jsx(J,{className:"text-2xl flex hover:opacity-60"})}),e.jsx("span",{className:"ml-1.5",children:"View Gallery"})]})]}):e.jsx("img",{className:"transition-all group-hover:opacity-25",src:`${o}w780${s==null?void 0:s.poster_path}`,alt:""}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center flex-wrap",children:e.jsxs("h1",{className:"text-[32px] mb-1.5 font-bold font-['Montserrat']",children:[s==null?void 0:s.title," ",(s==null?void 0:s.release_date)&&e.jsxs("span",{className:"text-3xl ml-2.5 font-normal tracking-[2px] text-[32px]",children:["(",s==null?void 0:s.release_date.slice(0,4),")"]})]})}),(s==null?void 0:s.tagline)&&e.jsx("p",{className:"text-sm italic mb-3",children:s==null?void 0:s.tagline}),e.jsxs("div",{className:"inline-flex items-center justify-between whitespace-nowrap mt-3 mb-4",children:[e.jsxs("div",{className:"flex items-center text-base",children:[e.jsxs("div",{className:"flex items-center justify-center bg-[#081c22] text-white w-[55px] h-[55px] rounded-[50px] text-lg",style:{border:`3px solid ${s!=null&&s.vote_average?U(k/10):"#777"}`},children:[e.jsx("p",{className:"tracking-normal",children:s!=null&&s.vote_average?+k.toFixed(1)*10:"NR"}),s!=null&&s.vote_average?e.jsx(Q,{className:"text-[8px] translate-x-[1px] translate-y-[-3px]"}):null]}),s!=null&&s.runtime?e.jsx("span",{className:"mx-4 w-[2px] rounded-[10px] text-mainTextColo opacity-60 h-[30px]"}):"",s!=null&&s.runtime?e.jsx("p",{className:"runtime",children:X(s==null?void 0:s.runtime)}):""]}),(s==null?void 0:s.genres)&&s.genres.length>0&&e.jsx("span",{className:"mx-4 w-[2px] rounded-[10px] text-mainTextColo opacity-60 h-[30px]"}),e.jsx("ul",{className:"genres",children:g==null?void 0:g.map((d,a)=>a<3&&e.jsxs("li",{children:[d.name," ",a===g.length-1||a===2?null:","]},d.id))})]}),(s==null?void 0:s.overview)&&e.jsxs("div",{className:"overview",children:[e.jsx("h3",{children:"Overview"}),e.jsx("p",{children:s==null?void 0:s.overview})]}),e.jsxs("div",{className:"flex items-center gap-x-8 mt-8",children:[m&&e.jsxs("button",{type:"button",onClick:()=>i(!0),className:`flex justify-center items-center 
                  text-base cursor-pointer bg-transparent border-none text-white 
                  transition-all tracking-[0.5px] min-h-[35px] [&>svg]:w-[35px] 
                  [&>svg]:h-[35px] [&>svg]:mr-[8px] hover:opacity-60 font-semibold`,children:[e.jsx(G,{}),e.jsx("span",{children:"Play Trailer"})]}),e.jsx(D,{onClickAway:()=>n(!1),children:e.jsx(ss,{title:e.jsx("span",{style:{fontSize:"12px",letterSpacing:"0.5px"},children:"Please login to add to Watchlist"}),arrow:!0,PopperProps:{disablePortal:!0},onClose:()=>n(!1),open:l,disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:e.jsxs("button",{type:"button",className:`[&>svg]:w-[20px] [&>svg]:h-[20px] [&>svg]:mr-[14px] 
                    flex justify-center items-center 
                    text-base cursor-pointer bg-transparent border-none text-white 
                    transition-all tracking-[0.5px] min-h-[35px] hover:opacity-60 font-semibold`,onClick:W,children:[e.jsx(H,{}),e.jsx("span",{children:x&&b?"Remove from Watchlist":"Add to Watchlist"})]})})})]})]})]})]}),u&&e.jsx(is,{trailer:m,setViewTrailer:i,movie:s}),r&&e.jsx(cs,{setViewGallery:t,movie:s})]})},as=({name:s,profile_path:r,character:t,id:l})=>e.jsxs("li",{className:"w-[138px] bg-white dark:bg-bgCard rounded-cardBr shadow-castShadow border dark:border-black",children:[e.jsx(y,{to:`/cast/${l}`,children:e.jsx("img",{src:`${o}w342${r}`,alt:s,className:"w-full flex rounded-s-sm"})}),e.jsxs("div",{className:"py-[13px] px-[11px]",children:[e.jsx("h3",{className:"text-sm text-black dark:text-mainTextColo",children:s}),e.jsx("p",{className:"text-xs mt-[5px] text-[#3c3c3c] dark:text-secondaryText",children:t})]})]}),os=({movieData:s})=>{var l;const r=c.useRef(null),{darkMode:t}=c.useContext(B);return e.jsxs("div",{className:"cast",children:[e.jsx("h2",{className:"mb-4 font-bold text-lg text-black dark:text-mainTextColo",children:"Cast"}),e.jsxs("ul",{className:`relative grid grid-flow-col justify-start gap-4 overflow-x-auto translate-y-[-2px] pt-[2px] pb-4 ${t?"scroll":"scroll-day"}`,ref:r,children:[(l=s==null?void 0:s.credits)==null?void 0:l.cast.map((n,u)=>n.profile_path&&u<20&&c.createElement(as,{...n,key:`${n.id}-${n.popularity}`})),e.jsx("li",{className:"flex justify-center items-center flex-nowrap font-bold text-sm w-[144px]",children:e.jsxs(y,{to:"casts",className:"flex items-center text-base text-black dark:text-mainTextColo",children:["View More ",e.jsx(es,{size:50})]})})]})]})},ps=({movieData:s})=>{const r=[{base:"https://instagram.com/",id:s==null?void 0:s.external_ids.instagram_id,icon:O,keyID:9823479237498,name:"Instagram"},{base:"https://facebook.com/",id:s==null?void 0:s.external_ids.facebook_id,icon:K,keyID:1458972394879,name:"Facebook"},{base:"https://twitter.com/",id:s==null?void 0:s.external_ids.twitter_id,icon:V,keyID:7849236987293,name:"Twitter"},{base:"",id:s==null?void 0:s.homepage,icon:ts,keyID:8386725394781,name:"Website"}];return e.jsxs("div",{className:"w-[260px] flex flex-col flex-1",children:[e.jsx("ul",{className:"flex justify-start text-2xl w-[150px] translate-x-[-10px] mb-4",children:r.map(t=>t.id&&e.jsx("li",{className:"[&:not(:first-child)]:ml-[1.2rem]",children:e.jsx("a",{href:`${t.base}${t.id}`,target:"_blank",rel:"noreferrer","aria-label":`${s==null?void 0:s.title} ${t.name}`,className:"flex justify-center items-center py-[5px] px-[10px] transition-all text-black dark:text-mainTextColo hover:opacity-60",children:e.jsx(t.icon,{})})},`${t.id}-${t.keyID}`))}),r.some(t=>t.id)&&e.jsx("div",{className:"w-full bg-[#ccc] h-[2px] mb-4 rounded-[50px]"}),e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-black dark:text-mainTextColo",children:"Status"}),e.jsxs("p",{className:"text-sm mt-[2px] text-black dark:text-mainTextColo",children:[s==null?void 0:s.status,(s==null?void 0:s.status)==="Released"&&` (${Y(s==null?void 0:s.release_date.replace(/-/g,"/"),"short")})`]})]}),(s==null?void 0:s.budget)>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-black dark:text-mainTextColo",children:"Budget"}),e.jsxs("p",{className:"tracking-[0.5px] text-black dark:text-mainTextColo",children:["$",Number(s==null?void 0:s.budget).toLocaleString()]})]}),(s==null?void 0:s.revenue)>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-black dark:text-mainTextColo",children:"Revenue"}),e.jsxs("p",{className:"tracking-[0.5px] text-black dark:text-mainTextColo",children:["$",Number(s==null?void 0:s.revenue).toLocaleString()]})]})]})]})},hs=({title:s,backdrop_path:r,id:t})=>e.jsxs("li",{className:"flex flex-col rounded-[4px] shadow-castShadow border",children:[e.jsx(y,{to:`/${t}`,className:"flex z-[2]",children:e.jsx("img",{src:`${o}w780${r}`,loading:"lazy",alt:s,className:"rounded-b-[3px]"})}),e.jsx("div",{className:"p-3 bg-white dark:bg-bgCard whitespace-nowrap overflow-hidden text-ellipsis",children:e.jsx("h3",{className:"text-black dark:text-mainTextColo font-medium",children:s})})]}),us=({movieData:s})=>{var t;let r=1;return e.jsxs("section",{className:"container max-w-xxl mx-auto my-0",children:[e.jsx("h2",{className:"mb-4 text-2xl text-black dark:text-mainTextColo",children:"Recommendations"}),e.jsx("ul",{className:"grid relative grid-cols-6 justify-start items-start gap-[0.5rem] mb-6 pb-4",children:(t=s==null?void 0:s.recommendations)==null?void 0:t.results.map(l=>l.backdrop_path&&r++&&r<=7&&c.createElement(hs,{...l,key:`${l.id}${l.popularity}`}))})]})},$s=()=>{const[s,r]=c.useState(null),{id:t}=S();return c.useEffect(()=>{if(!t)return;(async()=>{try{const n=await q(t);r(n==null?void 0:n.data)}catch(n){console.log(n)}})()},[t]),e.jsxs(e.Fragment,{children:[e.jsx(ds,{movieData:s}),e.jsxs("section",{className:"flex justify-between items-start gap-x-12 max-w-xxl mt-0 mx-auto mb-12",children:[e.jsx(os,{movieData:s}),e.jsx(ps,{movieData:s})]}),e.jsx(us,{movieData:s})]})};export{$s as default};
