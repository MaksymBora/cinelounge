import{j as t,L as x,C as h,r as n,A as u}from"./index-e558ba13.js";import{d as f,g}from"./serviceFavMovies-5a2de246.js";import{F as j}from"./index.esm-a5bb04ae.js";import{i as b}from"./imagePath-b3d8f83e.js";import{a as N,c as v}from"./utilities-1b6bfb65.js";const w=({movieInfo:{poster:s,name:o,date:a,movieId:r,rating:e,_id:l,type:i},removeFromWatchlist:m})=>{const d=async()=>{try{const c=await f(l);return m(l),c}catch(c){return console.log(c),c}},p=i==="movie"?`/${r}`:`/shows/${r}`;return t.jsxs("div",{className:"bg-bgCard text-mainTextColo flex flex-col rounded-cardBr shadow-cardShadow",children:[t.jsx(x,{className:"relative pt-[150%]",to:p,children:t.jsx("img",{className:"absolute top-0 left-0 rounded-[3px 3px 0 0]",src:`${b}w500${s}`,loading:"lazy",alt:o})}),t.jsxs("div",{className:"pt-[28px] pb-[20px] px-[20px] min-h-[100px] flex flex-col relative h-full",children:[t.jsx("h2",{className:"font-semibold text-base ",children:o}),t.jsx("p",{className:"mt-[5px] text-sm text-secondaryText",children:N(a==null?void 0:a.replace(/-/g,"/"),"short")}),t.jsxs("div",{className:"absolute -top-[20px] left-[11px] flex justify-center items-center bg-rateBg w-[40px] h-[40px] rounded-[50px] text-xs text-white",style:{border:`3px solid ${e?v(e/10):"#777"}`},children:[t.jsx("p",{className:"tracking-normal",children:e?+e.toFixed(1)*10:"NR"}),e?t.jsx(j,{className:"text-[8px] translate-[1px, -3px]"}):null]}),t.jsx("button",{type:"button",onClick:d,className:"bg-transparent border-none text-mainTextColo text-sm cursor-pointer p-[5px] absolute right-2.5 bottom-2.5",title:"Remove from watchlist",children:t.jsx(h,{})})]})]})},y=()=>{const{isLoggedIn:s}=n.useContext(u),[o,a]=n.useState([]);return n.useEffect(()=>{s&&(async()=>{try{const e=await g();e!==null&&a(e)}catch(e){console.log(e)}})()},[s]),t.jsxs("div",{className:"max-w-xxl my-12 mx-auto min-h-watchlist",children:[t.jsx("h1",{className:"text-center font-bold text-3xl",children:"My Watchlist"}),!s&&t.jsxs("p",{className:"mt-16 text-center",children:[t.jsx(x,{to:"/login",className:"underline text-mainTextColo font-medium",children:"Login"})," ","to start adding items!"]}),s&&o.length===0&&t.jsx("p",{className:"mt-16 text-center",children:"Add movies or shows to your Watchlist to have them appear here!"}),s&&o&&t.jsx("div",{className:"grid grid-cols-5 gap-8 bg-inherit text-mainTextColo w-full mt-16",children:o.map(r=>t.jsx(w,{movieInfo:r,removeFromWatchlist:e=>{const l=o.filter(i=>i._id!==e);a(l)}},`${r._id}`))})]})},B=()=>t.jsx(y,{});export{B as default};
