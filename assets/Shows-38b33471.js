import{j as e,r as i,F as f,A as g}from"./index-4edb6553.js";import{S as B}from"./ShowsCard-d50bbdb4.js";import{g as M,T as P,P as _}from"./MuiPallete-50fcd646.js";import{S as j,d as v,b as C,i as w,c as A,I as R,C as S,s as D,a as T,w as G,F as I}from"./watchProviders-4536cb2f.js";import{H as E}from"./index.esm-c3fd1986.js";import{i as V}from"./imagePath-b3d8f83e.js";import{c as O}from"./TransitionGroupContext-7cfe6ae1.js";import"./index.esm-7aca774a.js";import"./utilities-1b6bfb65.js";import"./plug-56201456.js";import"./Transition-5cad3421.js";import"./index-01c4eb7b.js";const z=({filterMenuOpen:t,showsData:s})=>e.jsx("section",{className:` grid grid-cols-filmList gap-8 bg-inherit text-mainTextColo  ${t?"widthWithFilter":"w-full"}`,children:s==null?void 0:s.results.map(l=>l.poster_path&&e.jsx(B,{showsData:l},l.id))}),$=[{value:"popularity.desc",label:"Popularity"},{value:"vote_average.desc",label:"Rating"},{value:"first_air_date.desc",label:"Newly released"}],H={year:[1e3,9999],rating:[0,100],genres:[],services:[],status:[],type:[]},L=({selectedOption:t,setSelectedOption:s})=>{const{setShowsData:l}=i.useContext(f),n=o=>{s(o)};return i.useEffect(()=>{t&&(async(c,r)=>{try{const d=await C(c,r);d&&l(d.data)}catch(d){console.log(d)}})(t.value,H)},[t,l]),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-center text-black dark:text-mainTextColo mb-2 font-semibold text-[18px]",children:"Sort by"}),e.jsx(j,{options:$,className:"text-black",styles:v,onChange:o=>n(o),defaultValue:$,value:t,isSearchable:!1})]})},W=w(),q=[{value:4,label:"Scripted"},{value:2,label:"Miniseries"},{value:3,label:"Reality"},{value:0,label:"Documentary"},{value:5,label:"Talk Show"}],J=({showsFormData:t,setShowsFormData:s})=>{const l=n=>{s({...t,type:n})};return e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-center text-black dark:text-mainTextColo mb-2 font-semibold text-[18px]",children:"Type"}),e.jsx(j,{options:q,className:"text-black",styles:v,value:t.type,isSearchable:!1,isMulti:!0,onChange:l,components:W})]})},K=w(),Q=[{value:0,label:"Returning Series"},{value:3,label:"Ended"},{value:4,label:"Cancelled"}],U=({showsFormData:t,setShowsFormData:s})=>{const l=n=>{s({...t,status:n})};return e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-center text-black dark:text-mainTextColo mb-2 font-semibold text-[18px]",children:"Status"}),e.jsx(j,{options:Q,className:"text-black",styles:v,value:t.status,isSearchable:!1,isMulti:!0,onChange:l,components:K})]})},X=A(R.Range),Y=({showsFormData:t,setShowsFormData:s,name:l,min:n,max:o,step:c,state:r,marks:d,tipFormatter:m})=>{const p=a=>{s({...t,[l]:a})};return e.jsxs("div",{className:"mb-12 py-0 px-[14px]",children:[e.jsx("header",{className:"flex mb-[2.4 rem] justify-center items-center",children:e.jsx("h3",{className:"capitalize text-black dark:text-mainTextColo",children:l})}),e.jsx(X,{className:"text-[20px] mr-[5px]",onChange:p,defaultValue:[n,o],value:r,min:n,max:o,step:c,marks:d,tipFormatter:m,railStyle:S.rail,trackStyle:S.track,dotStyle:S.dot,handleStyle:S.handle,tipProps:{placement:"top",visible:!0}})]})},Z=w(),ee=({showsFormData:t,setShowsFormData:s})=>{const l=n=>{s({...t,genres:n})};return e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-center text-black dark:text-mainTextColo mb-2 font-semibold text-[18px]",children:"Genre"}),e.jsx(j,{options:D,className:"text-black",styles:v,value:t.genres,isSearchable:!1,isMulti:!0,onChange:l,components:Z})]})},te=({setShowsFormData:t,id:s,name:l,state:n,stateStr:o,img:c})=>{const r=()=>{t(d=>{const m=n.includes(s)?n.filter(p=>p!==s):[...n,s];return{...d,[o]:m}})};return e.jsx("li",{className:"flex items-center",children:e.jsx("button",{type:"button",onClick:r,className:`bg-transparent cursor-pointer duration-500 border-[1px] border-[black] m-[2px] rounded-[2px] opacity-100 ${n.length>0&&!n.includes(s)?"opacity-20":""}`,"aria-pressed":n.includes(s),"aria-label":l,children:e.jsx("img",{src:`${V}original${c}`,loading:"lazy",alt:"",className:"flex rounded-[1px]"})})})},se={year:[1e3,9999],rating:[0,100],genres:[],services:[],status:[],type:[]},ae=()=>{const{showsFormData:t,setShowsFormData:s}=i.useContext(f),[l,n]=i.useState(null),{setShowsData:o}=i.useContext(f),{setPage:c}=i.useContext(g),{setShouldFetchShowsData:r}=i.useContext(g),d=[{name:"year",min:1980,max:2023,step:1,tipFormatter:a=>a,state:t.year,marks:T.year},{name:"rating",min:0,max:100,step:1,tipFormatter:a=>`${a} + '%'`,state:t.rating,marks:T.rating}],m=a=>{a.preventDefault(),(async(u,h)=>{try{const x=await C(u,h);o(x==null?void 0:x.data)}catch(x){console.log(x)}})("popularity.desc",t)},p=a=>{a.preventDefault(),s(se),o(null),n(null),c(1),r(!0),window.scrollTo(0,0)};return e.jsx("div",{className:"scroll  w-[230px] px-px sticky h-[80vh] active:translate-x-0 active: opacity-100",children:e.jsxs("form",{className:"form",onSubmit:m,children:[e.jsx(L,{selectedOption:l,setSelectedOption:n}),e.jsx("div",{className:"bg-[#ddd] h-px rounded-[10px] mb-4"}),e.jsx(ee,{showsFormData:t,setShowsFormData:s}),e.jsx("div",{className:"bg-[#ddd] h-px rounded-[10px] mb-4"}),e.jsx(J,{showsFormData:t,setShowsFormData:s}),e.jsx("div",{className:"bg-[#ddd] h-px rounded-[10px] mb-4"}),e.jsx(U,{showsFormData:t,setShowsFormData:s}),e.jsx("div",{className:"bg-[#ddd] h-px rounded-[10px] mb-4"}),d.map(a=>e.jsx(Y,{showsFormData:t,setShowsFormData:s,name:a.name,min:a.min,max:a.max,step:a.step,state:a.state,marks:a.marks,tipFormatter:a.tipFormatter},a.name)),e.jsx("div",{className:"bg-[#ddd] h-px rounded-[10px] mb-4"}),e.jsxs("div",{className:"flex flex-col items-center w-full mb-8",children:[e.jsx("h3",{className:"w-full mb-6 text-center text-black dark:text-mainTextColo font-semibold text-[18px]",children:"Services"}),e.jsx("ul",{className:"w-full grid gap-[5px] grid-cols-4",children:G.map(a=>e.jsx(te,{setShowsFormData:s,state:t.services,stateStr:"services",id:a.provider_id,name:a.provider_name,img:a.logo_path},`${a.provider_id}-${a.provider_name}`))})]}),e.jsx("div",{className:"bg-[#ddd] h-px rounded-[10px] mb-4"}),e.jsxs("div",{className:"flex flex-col gap-y-5 mt-8 mr-0 mb-8 ml-[2px]",children:[e.jsx("button",{className:"text-[17px] font-medium p-[15px] rounded-[3px] border-none text-left cursor-pointer shadow-filterBtn bg-authBtn text-black dark:text-mainTextColo",type:"submit","aria-label":"Apply filters",children:e.jsxs("span",{className:"flex justify-between items-center",children:["Apply ",e.jsx(E,{className:"scale-160 mr-[5px]"})]})}),e.jsx("button",{className:"text-[17px] font-medium p-[15px] rounded-[3px] border-none text-left cursor-pointer shadow-filterBtn bg-clearAllBtn text-black",type:"button",onClick:p,"aria-label":"Clear all filters",children:"Clear All"})]})]})})};function be(){const[t,s]=i.useState(!1),{shouldFetchShowsData:l,setShouldFetchShowsData:n}=i.useContext(g),{showsPage:o,setShowsPage:c}=i.useContext(g),{showsData:r,setShowsData:d}=i.useContext(f),{showsFormData:m}=i.useContext(f),{darkMode:p}=i.useContext(g),k=O(M(p?"dark":"light"));i.useEffect(()=>{l&&(r===null||o!==1||o===1)&&(async(x,N,b)=>{try{const y=await C(x,N,b);y&&(d(y.data),n(!1))}catch(y){console.log(y)}})("popularity.desc",m,o)},[r,d,o,l,n,m]);const F=u=>{const h=parseInt(u.target.textContent,10),x=u.target.dataset.testid,N=h||x;switch(n(!0),typeof N){case"number":c(h);break;case"string":x==="NavigateNextIcon"?c(b=>b+1):x==="NavigateBeforeIcon"&&o>1?c(b=>b-1):c(1);break;default:c(1)}};return e.jsxs(e.Fragment,{children:[e.jsx(I,{filterMenuOpen:t,setFilterMenuOpen:s}),e.jsxs("div",{className:"max-w-xxl mx-auto flex my-12 justify-center items-start gap-8",children:[t&&e.jsx(ae,{}),e.jsx(z,{showsData:r,filterMenuOpen:t})]}),e.jsx(P,{theme:k,children:e.jsx("section",{className:"max-w-xxl mx-auto flex items-center justify-center my-12",children:(r==null?void 0:r.total_pages)&&e.jsx(_,{count:(r==null?void 0:r.total_pages)>25?25:r==null?void 0:r.total_pages,variant:"outlined",shape:"rounded",sx:{button:{padding:"15px"}},siblingCount:1,onChange:F})})})]})}export{be as default};
